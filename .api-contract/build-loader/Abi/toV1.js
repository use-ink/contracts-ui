// Copyright 2017-2025 @polkadot/api-contract authors & contributors
// SPDX-License-Identifier: Apache-2.0
import { convertSiV0toV1 } from '@polkadot/types';
import { objectSpread } from '@polkadot/util';
function v0ToV1Names(all) {
  return all.map(e =>
    objectSpread({}, e, {
      name: Array.isArray(e.name) ? e.name : [e.name],
    }),
  );
}
export function v0ToV1(registry, v0) {
  if (!v0.metadataVersion.length) {
    throw new Error('Invalid format for V0 (detected) contract metadata');
  }
  return registry.createType(
    'ContractMetadataV1',
    objectSpread({}, v0, {
      spec: objectSpread({}, v0.spec, {
        constructors: v0ToV1Names(v0.spec.constructors),
        messages: v0ToV1Names(v0.spec.messages),
      }),
      types: convertSiV0toV1(registry, v0.types),
    }),
  );
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9WMS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRvVjEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0VBQW9FO0FBQ3BFLHNDQUFzQztBQUt0QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBTTlDLFNBQVMsV0FBVyxDQUFFLEdBQVk7SUFDaEMsT0FBTyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDbkIsWUFBWSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7UUFDbEIsSUFBSSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUN6QixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFDUixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0tBQ2IsQ0FBQyxDQUFDLENBQUM7QUFDUixDQUFDO0FBRUQsTUFBTSxVQUFVLE1BQU0sQ0FBRSxRQUFrQixFQUFFLEVBQXNCO0lBQ2hFLElBQUksQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQy9CLE1BQU0sSUFBSSxLQUFLLENBQUMsb0RBQW9ELENBQUMsQ0FBQztJQUN4RSxDQUFDO0lBRUQsT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDLG9CQUFvQixFQUFFLFlBQVksQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFO1FBQ3BFLElBQUksRUFBRSxZQUFZLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUU7WUFDOUIsWUFBWSxFQUFFLFdBQVcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztZQUMvQyxRQUFRLEVBQUUsV0FBVyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1NBQ3hDLENBQUM7UUFDRixLQUFLLEVBQUUsZUFBZSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDO0tBQzNDLENBQUMsQ0FBQyxDQUFDO0FBQ04sQ0FBQyJ9
//# sourceHash=8ff33b3e5804b8e5e8e2d0e45cf7e4e865829e7d0dfb3d0aa0825d0f3097b223
