// Copyright 2017-2025 @polkadot/api-contract authors & contributors
// SPDX-License-Identifier: Apache-2.0
import { objectSpread } from '@polkadot/util';
const ARG_TYPES = {
  ContractConstructorSpec: 'ContractMessageParamSpecV2',
  ContractEventSpec: 'ContractEventParamSpecV2',
  ContractMessageSpec: 'ContractMessageParamSpecV2',
};
function v1ToV2Label(entry) {
  return objectSpread({}, entry, {
    label: Array.isArray(entry.name) ? entry.name.join('::') : entry.name,
  });
}
function v1ToV2Labels(registry, outType, all) {
  return all.map(e =>
    registry.createType(
      `${outType}V2`,
      objectSpread(v1ToV2Label(e), {
        args: e.args.map(a => registry.createType(ARG_TYPES[outType], v1ToV2Label(a))),
      }),
    ),
  );
}
export function v1ToV2(registry, v1) {
  return registry.createType(
    'ContractMetadataV2',
    objectSpread({}, v1, {
      spec: objectSpread({}, v1.spec, {
        constructors: v1ToV2Labels(registry, 'ContractConstructorSpec', v1.spec.constructors),
        events: v1ToV2Labels(registry, 'ContractEventSpec', v1.spec.events),
        messages: v1ToV2Labels(registry, 'ContractMessageSpec', v1.spec.messages),
      }),
    }),
  );
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9WMi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRvVjIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0VBQW9FO0FBQ3BFLHNDQUFzQztBQU10QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFrQjlDLE1BQU0sU0FBUyxHQUFHO0lBQ2hCLHVCQUF1QixFQUFFLDRCQUE0QjtJQUNyRCxpQkFBaUIsRUFBRSwwQkFBMEI7SUFDN0MsbUJBQW1CLEVBQUUsNEJBQTRCO0NBQ3pDLENBQUM7QUFFWCxTQUFTLFdBQVcsQ0FBRSxLQUFpQjtJQUNyQyxPQUFPLFlBQVksQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFO1FBQzdCLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFDOUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUN2QixDQUFDLENBQUMsS0FBSyxDQUFDLElBQUk7S0FDZixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxZQUFZLENBQXVCLFFBQWtCLEVBQUUsT0FBVSxFQUFFLEdBQW1CO0lBQzdGLE9BQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ25CLFFBQVEsQ0FBQyxVQUFVLENBQUMsR0FBRyxPQUFPLElBQUksRUFBRSxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQy9ELElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ3JCLFFBQVEsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUN4RDtLQUNGLENBQUMsQ0FBQyxDQUNKLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxVQUFVLE1BQU0sQ0FBRSxRQUFrQixFQUFFLEVBQXNCO0lBQ2hFLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRSxZQUFZLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRTtRQUNwRSxJQUFJLEVBQUUsWUFBWSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFO1lBQzlCLFlBQVksRUFBRSxZQUFZLENBQUMsUUFBUSxFQUFFLHlCQUF5QixFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ3JGLE1BQU0sRUFBRSxZQUFZLENBQUMsUUFBUSxFQUFFLG1CQUFtQixFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQ25FLFFBQVEsRUFBRSxZQUFZLENBQUMsUUFBUSxFQUFFLHFCQUFxQixFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1NBQzFFLENBQUM7S0FDSCxDQUFDLENBQUMsQ0FBQztBQUNOLENBQUMifQ==
//# sourceHash=ea82fda229c2ef5293604e32a25290d4dfe476eb8d5e35ce746827a5b14dad67
